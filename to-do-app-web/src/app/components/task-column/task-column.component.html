<div
  class="task-column"
  [class.task-column--drag-over]="isDragOver"
  [class.task-column--valid-drop]="isDragging() && isValidDropZone()"
  [class.task-column--invalid-drop]="isDragging() && isInvalidDropZone()"
  (dragover)="onDragOver($event)"
  (dragenter)="onDragEnter($event)"
  (dragleave)="onDragLeave($event)"
  (drop)="onDrop($event)"
>
  <div class="task-column__header" [style.border-color]="getStatusConfig().borderColor">
    <i [class]="getStatusConfig().icon" [style.color]="getStatusConfig().textColor"></i>
    <h2 class="task-column__title">{{ getStatusConfig().label }}</h2>
    <span class="task-column__count">{{ tasks().length }}</span>
  </div>

  <div class="task-column__content">
    @if (isDragging() && isValidDropZone()) {
      <div class="task-column__drop-indicator">
        <i class="pi pi-arrow-down"></i>
        <span>Drop here</span>
      </div>
    }

    @for (task of tasks(); track task.id) {
      <app-task-card
        [task]="task"
        (onEdit)="handleEdit($event)"
        (onStatusChange)="handleStatusChange($event)"
        (onDelete)="handleDelete($event)"
      />
    } @empty {
      @if (!isDragging() || !isValidDropZone()) {
        <div class="task-column__empty">
          <i class="pi pi-inbox"></i>
          <p>No tasks</p>
        </div>
      }
    }
  </div>

  @if (isDragging() && isInvalidDropZone()) {
    <div class="task-column__overlay">
      <i class="pi pi-ban"></i>
    </div>
  }
</div>
